<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App with API + LocalStorage</title>

   

</head>
<body>

    <h2>Todo App </h2>

    <button onclick="loadFromAPI()">Save </button>

    <div id="message"></div>
    <div id="todoList"></div>

    <script>

       
        async function fetchTodos() {
            const response = await fetch("https://jsonplaceholder.typicode.com/todos");
            const data = await response.json();
            return data.slice(0, 20); // return only first 20
        }

       
        function storeTodos(todos) {
            localStorage.setItem("todos", JSON.stringify(todos));
        }

        
        function getStoredTodos() {
            const todos = localStorage.getItem("todos");
            return todos ? JSON.parse(todos) : [];
        }

        
        function renderTodos() {
            const todos = getStoredTodos();
            const todoList = document.getElementById("todoList");
            const msg = document.getElementById("message");

            todoList.innerHTML = "";

            if (todos.length === 0) {
                msg.textContent = "No Todos Available";
                return;
            }

            msg.textContent = "";

            todos.forEach(todo => {
                const div = document.createElement("div");
                div.className = "todo";

                const title = document.createElement("span");
                title.textContent = todo.title;

                if (todo.completed) {
                    title.classList.add("completed");
                }

                // Toggle Button
                const toggleBtn = document.createElement("button");
                toggleBtn.textContent = todo.completed ? "Undo" : "Complete";
                toggleBtn.onclick = () => toggleTodo(todo.id);

                // Delete Button
                const deleteBtn = document.createElement("button");
                deleteBtn.textContent = "Delete";
                deleteBtn.onclick = () => deleteTodo(todo.id);

                div.appendChild(title);
                div.appendChild(toggleBtn);
                div.appendChild(deleteBtn);

                todoList.appendChild(div);
            });
        }

       
        function deleteTodo(id) {
            let todos = getStoredTodos();

            todos = todos.filter(todo => todo.id !== id);

            storeTodos(todos);
            renderTodos();
        }

        
        function toggleTodo(id) {
            let todos = getStoredTodos();

            todos = todos.map(todo => {
                if (todo.id === id) {
                    todo.completed = !todo.completed;
                }
                return todo;
            });

            storeTodos(todos);
            renderTodos();
        }

       
        async function loadFromAPI() {
            const todos = await fetchTodos();
            storeTodos(todos);
            renderTodos();
        }

       
        window.onload = () => {
            renderTodos();
        };

    </script>

</body>
</html>
